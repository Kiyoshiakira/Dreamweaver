# ============================================================================
# Environment Variables for Firebase Functions
# ============================================================================
# 
# IMPORTANT: This is the ONLY place where the AI API key should be stored.
# The frontend code NEVER has direct access to the API key.
# All AI requests go through Firebase Functions which read from this .env file.
# 
# SECURITY: This .env file is in .gitignore and should NEVER be committed to git.
# 
# SETUP INSTRUCTIONS:
# 1. Copy this file: cp .env.example .env
# 2. Get your API key from: https://aistudio.google.com/app/apikey
# 3. Replace "your_api_key_here" below with your actual API key
# 4. Save the file
# 
# ============================================================================

# Google Generative Language API Key
# This key is used by Firebase Functions to connect to Google's AI services
# The frontend NEVER sees this key - it only calls Firebase Functions endpoints
# 
# You can use any of these variable names (they're checked in order):
DREAMWEAVER_APIKEY=your_api_key_here
# GEN_API_KEY=your_api_key_here
# GENAI_KEY=your_api_key_here

# ============================================================================
# DEPLOYMENT OPTIONS
# ============================================================================

# OPTION 1: Local Development (use .env file)
# - Copy this file to .env and set DREAMWEAVER_APIKEY
# - Run: firebase emulators:start --only functions
# - The emulator will automatically load environment variables from .env

# OPTION 2: Production Deployment (use Firebase config - RECOMMENDED)
# For better security in production, use Firebase Functions config:
#   firebase functions:config:set genai.key="YOUR_API_KEY"
#   firebase deploy --only functions
# 
# The function checks for API keys in this priority order:
# 1. functions.config().genai.key (set via Firebase CLI)
# 2. process.env.DREAMWEAVER_APIKEY (from .env file)
# 3. process.env.GEN_API_KEY (from .env file - backward compatibility)
# 4. process.env.GENAI_KEY (from .env file - alternate name)

# ============================================================================
# WHY THIS ARCHITECTURE?
# ============================================================================
# 
# This application uses a secure proxy architecture:
# 
# Frontend (public/index.html)
#   ↓ calls
# Firebase Functions (/generateStory, /generateTTS, /generateImage)
#   ↓ reads API key from
# .env file (or Firebase config)
#   ↓ makes authenticated requests to
# Google Generative Language API
# 
# Benefits:
# ✓ API key is NEVER exposed to the client
# ✓ API key is NEVER in the browser
# ✓ API key is NEVER in version control
# ✓ You can use Firebase Deploy from terminal
# ✓ Git Pull updates the app without exposing secrets
# 
# ============================================================================

# ================================================
# Retry and Timeout Configuration (Auto-configured)
# ================================================
# The following settings are automatically configured in the functions:
# - Maximum retries: 3 attempts for transient failures (429, 500, 502, 503, 504)
# - Initial retry delay: 1 second with exponential backoff
# - Maximum retry delay: 10 seconds
# - Request timeout: 30 seconds per API call
# - Automatic retry for network errors (ECONNRESET, ETIMEDOUT, etc.)
#
# These settings optimize reliability and handle temporary API issues automatically.
